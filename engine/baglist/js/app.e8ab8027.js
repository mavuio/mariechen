(function(t){function e(e){for(var r,i,o=e[0],c=e[1],u=e[2],f=0,d=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/engine/baglist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"005c":function(t,e,n){var r=n("e45a");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var s=n("499e").default;s("3084436f",r,!0,{sourceMap:!1,shadowMode:!1})},2068:function(t,e,n){"use strict";var r=n("005c"),s=n.n(r);s.a},"20f1":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"",""])},"23b1":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"",""])},"2e0f":function(t,e,n){var r=n("943f");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var s=n("499e").default;s("492d00d1",r,!0,{sourceMap:!1,shadowMode:!1})},"3c70":function(t,e,n){"use strict";var r=n("6c20"),s=n.n(r);s.a},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"items",(function(){return u})),n.d(r,"tags",(function(){return l})),n.d(r,"isLoading",(function(){return f})),n.d(r,"apiUrl",(function(){return d})),n.d(r,"baseTags",(function(){return p})),n.d(r,"lang",(function(){return g})),n.d(r,"currency",(function(){return h})),n.d(r,"currencySymbol",(function(){return m})),n.d(r,"currentPage",(function(){return v}));var s={};n.r(s),n.d(s,"fetchItems",(function(){return w})),n.d(s,"fetchTags",(function(){return _}));var a={};n.r(a),n.d(a,"setItems",(function(){return x})),n.d(a,"setTags",(function(){return C})),n.d(a,"setLoading",(function(){return P})),n.d(a,"setCurrentPage",(function(){return O}));n("cadf"),n("551c"),n("f751"),n("097d");var i=n("a026"),o=n("2f62"),c=n("b17e"),u=function(t){return t.items},l=function(t){return t.tags},f=function(t){return t.isLoading},d=function(t){return t.extconf.apiUrl},p=function(t){return c.trim(t.extconf.baseTags||"")},g=function(t){return t.extconf.lang},h=function(t){return t.extconf.currency},m=function(t){return"usd"==t.extconf.currency?"$":"€"},v=function(t){return t.currentPage},b=n("bc3a"),y=n.n(b),w=function(t,e){var n=t.commit,r=t.getters;return console.log("fetchItems",e),n("setLoading",!0),n("setItems",{list:[],count:null,page:1}),new Promise((function(t,s){y.a.post(r["apiUrl"]+"/bags/list",e).then((function(e){console.log("items response",e),n("setItems",e.data.items),n("setLoading",!1),t()})).catch((function(t){n("setLoading",!1),s(t.response)}))}))},_=function(t,e){var n=t.commit,r=t.getters;return console.log("fetchTags",e),n("setLoading",!0),new Promise((function(t,e){y.a.get(r["apiUrl"]+"/tags/get_tag_tree_for_types?types=colors,size,material,usage,collection&lang="+r.lang).then((function(e){console.log("fetchTags response",e),n("setLoading",!1),n("setTags",e.data.payload),t()})).catch((function(t){n("setLoading",!1),e(t.response)}))}))},x=(n("04ff"),n("c5f6"),n("7cdf"),n("b17e"),function(t,e){t.items=e}),C=function(t,e){t.tags=e},P=function(t,e){t.isLoading=e},O=function(t,e){Number.isInteger(e)||(e=Number.parseInt(e,10)),t.currentPage=e},k={items:[],isLoading:!0,tags:{},currentPage:1,extconf:window.baglistAppConf};i["a"].use(o["a"]);var S=new o["a"].Store({state:k,getters:r,actions:s,mutations:a,strict:!0});var T=S,j=n("8c4f"),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"baglistapp"}},[n("BagSearch"),n("ResultList")],1)},z=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bagsearch"},[n("div",{staticClass:"bagsearch-title",class:{expanded:t.expanded.top,collapsed:!t.expanded.top,"filters-set":t.filtercount>0}},[n("a",{staticClass:"opener",on:{click:function(e){return e.preventDefault(),t.expandPane("top")}}},[n("span",{staticClass:"icon"},[t.expanded.top?n("i",{staticClass:"fas fa-minus"}):n("i",{staticClass:"fal fa-plus"})]),n("span",{staticClass:"text"},[t._v("Filter\n\n        "),n("span",{staticClass:"filtercount"},[t._v("("+t._s(t.filtercount)+")")])])]),t.filtercount>0?n("a",{staticClass:"resetter",on:{click:function(e){return e.preventDefault(),t.resetFilters(e)}}},[t._v(t._s(t.trans("Reset","Zurücksetzen")))]):t._e()]),n("div",{staticClass:"filters expandable",class:t.expanded.top?"expanded":"collapsed"},[n("div",{staticClass:"filterpane"},[n("div",{staticClass:"f-header mobile"},[n("div",{staticClass:"f-title"},[t._v("\n          Filter\n        ")]),n("div",{staticClass:"f-closer"},[n("a",{on:{click:function(e){return e.preventDefault(),t.expandPane("top")}}},[n("i",{staticClass:"fal fa-times fa-2x"})])])]),n("TagTreeChooser",{attrs:{tags:t.tags.material,title:"Material"},model:{value:t.data.material,callback:function(e){t.$set(t.data,"material",e)},expression:"data.material"}}),n("TagTreeChooser",{attrs:{tags:t.tags.colors,title:"Colour"},model:{value:t.data.color,callback:function(e){t.$set(t.data,"color",e)},expression:"data.color"}}),n("TagTreeChooser",{attrs:{tags:t.tags.size,title:"Size"},model:{value:t.data.size,callback:function(e){t.$set(t.data,"size",e)},expression:"data.size"}})],1),n("div",{staticClass:"buttonpane mobile"},[n("div",[t.filtercount>0?n("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.resetFilters(),t.expandPane("top")}}},[t._v(t._s(t.trans("Reset","Zurücksetzen")))]):t._e()]),n("div",[n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.expandPane("top")}}},[t._v(t._s(t.trans("apply","OK")))])])])])])},F=[],U=(n("8e6e"),n("6762"),n("2fdb"),n("bd86")),E=(n("a481"),n("456d"),n("ac6a"),n("28a5"),n("f7fe")),Q=n.n(E),W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tag-chooser"},[n("div",{staticClass:"tag-chooser-title"},[n("span",{staticClass:"text"},[t._v(t._s(t.title))])]),n("div",{staticClass:"tag-chooser-pane"},[n("ul",{staticClass:"tagfilter"},t._l(t.tags,(function(e){return n("li",{key:e.key,class:[t.hasKey(t.value,e.key)?"active":"not-active"]},[n("a",{on:{click:function(n){return n.preventDefault(),t.toggleKey(t.value,e.key)}}},[n("i",{staticClass:"fal fa-fw",class:[t.hasKey(t.value,e.key)?"fa-check":"fa-empty"]}),t._v(t._s(e.title))])])})),0)])])},M=[],D=n("b17e"),K={name:"TagTreeChooser",props:{tags:{required:!0},value:Array,title:String},data:function(){return{expanded:{top:!0}}},methods:{expandPane:function(t){this.expanded[t]=!this.expanded[t]},toggleKey:function(t,e){this.hasKey(t,e)?this.$delete(t,t.indexOf(e)):t.push(e)},hasKey:function(t,e){return D.contains(e,t)}}},R=K,q=(n("8f56"),n("2877")),A=Object(q["a"])(R,W,M,!1,null,null,null),N=A.exports;function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(n,!0).forEach((function(e){Object(U["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Z=n("b17e"),H={name:"bagsearch",props:{},data:function(){return{expanded:{top:!1},initialLoad:!0,loadCount:0,data:{keyword:"",color:[],material:[],size:[],usage:[]}}},components:{TagTreeChooser:N},methods:{trans:function(t,e){return"de"==this.$store.getters.lang?e:t},resetFilters:function(){console.log("#log 6220 resetf"),this.data.keyword="",this.data.color=[],this.data.material=[],this.data.size=[],this.data.usage=[]},expandPane:function(t){console.log("#log 3753",t),this.expanded[t]=!this.expanded[t]},restoreQueryFromUrl:function(){for(var t in console.log("#log 1646 restoreQueryFromUrl",this.$route.query),this.$route.query)if(this.$route.query.hasOwnProperty(t)){var e=this.$route.query[t];this.data[t]=e.split(",")}this.$route.query["page"]&&this.$store.commit("setCurrentPage",this.$route.query["page"])},setQueryInUrl:function(t){if(!this.initialLoad){var e=Object.assign({},this.$route.query);Object.keys(t).forEach((function(n){var r=t[n];r?e[n]=r:delete e[n]})),this.$router.replace(B({},this.$router.currentRoute,{query:e})).catch((function(t){}))}},removeQueryInUrl:function(t){console.log("#log 8891 removeQueryInUrl",t);var e={};t.forEach((function(t){e[t]=null})),this.setQueryInUrl(e)},searchFormSubmit:function(t){this.loadCount++;var e={};console.log("#searchFormSubmit "+t,this.data),this.data.color.length>0?e.color=this.data.color.join(","):this.removeQueryInUrl(["color"]),this.data.size.length>0?e.size=this.data.size.join(","):this.removeQueryInUrl(["size"]),this.data.material.length>0?e.material=this.data.material.join(","):this.removeQueryInUrl(["material"]),this.data.usage.length>0?e.usage=this.data.usage.join(","):this.removeQueryInUrl(["size"]),this.$store.getters.currentPage>1?e.page=this.$store.getters.currentPage:this.removeQueryInUrl(["page"]),this.setQueryInUrl(e),this.initialLoad=!1;var n=this.prepareQueryForApi(e);n.per_page=100,console.log("#log 1068",n),this.$store.dispatch("fetchItems",B({},n))},prepareQueryForApi:function(t){var e={},n=1;for(var r in this.$store.getters.baseTags&&Z.split(" ",this.$store.getters.baseTags).forEach((function(t){e["tags"+n++]=t})),t){if(["color","material","size","usage"].includes(r)){var s=t[r];s&&(e["tags"+n++]=s)}if(["page","per_page"].includes(r)){var a=t[r];a&&(e[r]=a)}}return e["currency"]=this.$store.getters.currency,e["lang"]=this.$store.getters.lang,e},toggleKey:function(t,e){console.log("#log",t,e),this.hasKey(t,e)?this.$delete(t,t.indexOf(e)):t.push(e)},hasKey:function(t,e){return Z.contains(e,t)},fetchItemsIfNeeded:function(){this.$store.dispatch("fetchTags")},setWatchers:function(){this.$watch("$store.getters.currentPage",(function(t){this.searchFormSubmit("pageChange")})),this.$watch("data",{handler:Q()((function(t){this.$store.commit("setCurrentPage",1),this.searchFormSubmit("datawatch")}),1e3),deep:!0})}},created:function(){this.restoreQueryFromUrl(),this.fetchItemsIfNeeded(),this.searchFormSubmit("initialLoad"),this.setWatchers()},watch:{},computed:{filtercount:function(){return this.data.color.length+this.data.material.length+this.data.size.length+this.data.usage.length},isLoading:function(){return this.$store.getters.isLoading},tags:function(){return this.$store.getters.tags},lang:function(){return this.$store.getters.lang}}},V=H,G=(n("be58"),Object(q["a"])(V,L,F,!1,null,null,null)),X=G.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"baglist"},[t.isLoading?n("div",[n("i",{staticClass:"fal fa-spinner fa-rotate fa-spin"})]):n("div",{staticClass:"prod-list",style:t.containerStyles},[0==t.items.count?n("div",{staticClass:"notfound"},[t._m(0),n("div",{staticClass:"notfound-txt"},[t._v("\n        "+t._s(t.items.count)+" "+t._s(t.trans("sorry, no products matching your search","Leider wurden zu deiner Suchanfrage keine Artikel gefunden"))+"\n      ")])]):t._e(),t._l(t.grouped_items,(function(e){return n("div",{key:e.key},t._l(e.items,(function(e,r){return n("a",{key:r,class:"cnt-"+e.files.length,attrs:{href:t.itemlink(e)},on:{mouseover:function(n){return t.mouseover(r,e.files)},mouseleave:function(e){return t.mouseleave(r)}}},[n("div",{staticClass:"imgpane"},[n("img",{attrs:{src:e.files[0].url}}),t.hoverimgs[r]?n("img",{staticClass:"on-hover",attrs:{src:t.hoverimgs[r]}}):t._e(),n("div",{staticClass:"variant-title"},[t._v("\n            "+t._s(e.p_title)+"\n          ")])])])})),0)}))],2),t.items.count>0&&t.items.count>t.items.per_page?n("b-pagination",{attrs:{"total-rows":t.items.count,"per-page":t.items.per_page,"aria-controls":"my-table","icon-pack":"fal",align:"center","hide-goto-end-buttons":!0},scopedSlots:t._u([{key:"prev-text",fn:function(){return[n("i",{staticClass:"fal fa-chevron-left"})]},proxy:!0},{key:"next-text",fn:function(){return[n("i",{staticClass:"fal fa-chevron-right"})]},proxy:!0}],null,!1,2100002404),model:{value:t.localCurrentPage,callback:function(e){t.localCurrentPage=e},expression:"localCurrentPage"}}):t._e()],1)},tt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notfound-pic"},[n("img",{attrs:{src:"/mysite/images/notfound.png"}})])}],et=n("768b"),nt=n("26d2"),rt=(n("b17e"),function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=t-e,i=n-e,o=s-r;return a<0&&(a=0),a>i&&(a=i),r+a/i*o}),st=n("b17e");function at(t){var e=localStorage.getItem("rememberScroll"),n=JSON.parse(e);null==n&&(n=[]),0==n.length&&(n=[]),n=[];var r=window.location.href,s=t,a={url:r,scroll:t},i=!1,o=0;0!=n.length?(n.forEach((function(t,e){t.url===r&&(i=!0,o=e)})),!0===i?n[o].scroll=s:n.push(a)):n.push(a),localStorage.setItem("rememberScroll",JSON.stringify(n))}var it={name:"ResultList",data:function(){return{lastHoveredItemIndex:-1,hoverimgs:{},windowW:document.documentElement.clientWidth}},methods:{setTab:function(t){this.currentTab=t},trans:function(t,e){return"de"==this.$store.getters.lang?e:t},handleWindowResize:Q()((function(){this.windowW=document.body.clientWidth}),200),mouseover:function(t,e){2==e.length&&this.$set(this.hoverimgs,t,e[1].url)},mouseleave:function(t){null!==this.hoverimgs[t]&&this.$set(this.hoverimgs,t,null)},itemlink:function(t){return"/shop/"+t.p_category+"/"+t.p_url+"/"+t.pv_url}},computed:{containerStyles:function(){return{fontSize:this.baseFontSize+"px"}},baseFontSize:function(){return rt(this.windowW,300,2e3,12,25)},items:function(){return this.$store.getters.items},grouped_items:function(){var t=st.pipe(st.groupBy(st.prop("p_category")),st.toPairs(),st.map((function(t){var e=Object(et["a"])(t,2),n=e[0],r=e[1];return{key:n,items:r}})))(this.$store.getters.items.list);return"#classics"==this.$store.getters.baseTags&&(t=st.reverse(t)),t},isLoading:function(){return this.$store.getters.isLoading},total_items:function(){return this.items.length},localCurrentPage:{get:function(){return this.$store.getters.currentPage},set:function(t){this.$store.commit("setCurrentPage",t)}}},watch:{"$store.getters.currentPage":function(t){this.localCurrentPage=t}},components:{"b-pagination":nt["a"]},created:function(){this.localCurrentPage=this.$store.getters.currentPage},mounted:function(){window.addEventListener("resize",this.handleWindowResize),setTimeout(function(){this.handleWindowResize()}.bind(this),10),setTimeout(function(){this.handleWindowResize()}.bind(this),500),window.addEventListener("scroll",(function(t){var e=$(window).scrollTop();at(e)}));var t=localStorage.getItem("rememberScroll"),e=JSON.parse(t),n=window.location.href;if(null==e)return!1;e.forEach((function(t){if(t.url===n){var e=t.scroll;setTimeout(function(){window.scrollTo(0,e)}.bind(this),500)}}))}},ot=it,ct=(n("3c70"),Object(q["a"])(ot,Y,tt,!1,null,null,null)),ut=ct.exports,lt={name:"AppWrapper",components:{BagSearch:X,ResultList:ut}},ft=lt,dt=(n("2068"),Object(q["a"])(ft,I,z,!1,null,null,null)),pt=dt.exports,gt=n("b960"),ht=n.n(gt);window.Vue=i["a"],i["a"].use(j["a"]);var mt=new j["a"]({routes:[{path:"/"}]});i["a"].use(ht.a),i["a"].config.productionTip=!1,window.baglistApp=new i["a"]({el:"#baglistapp",router:mt,store:T,template:"<AppWrapper/>",components:{AppWrapper:pt}})},"6c20":function(t,e,n){var r=n("23b1");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var s=n("499e").default;s("0af47601",r,!0,{sourceMap:!1,shadowMode:!1})},"8f56":function(t,e,n){"use strict";var r=n("2e0f"),s=n.n(r);s.a},"943f":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"",""])},be58:function(t,e,n){"use strict";var r=n("e924"),s=n.n(r);s.a},e45a:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"#baglistapp{color:#000;width:100%}",""])},e924:function(t,e,n){var r=n("20f1");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var s=n("499e").default;s("7f18c5be",r,!0,{sourceMap:!1,shadowMode:!1})}});
//# sourceMappingURL=app.e8ab8027.js.map