(function(t){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/engine/bagdetail/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"209e":function(t,e,n){var r=n("e8c0");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("499e").default;i("3197aac1",r,!0,{sourceMap:!1,shadowMode:!1})},"366c":function(t,e,n){"use strict";var r=n("e6a4"),i=n.n(r);i.a},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"debug",(function(){return B})),n.d(r,"extconf",(function(){return U})),n.d(r,"counter",(function(){return X})),n.d(r,"csrfToken",(function(){return F})),n.d(r,"liveApiUrl",(function(){return J})),n.d(r,"lang",(function(){return K})),n.d(r,"currentVariantId",(function(){return R})),n.d(r,"activeImageIndex",(function(){return Y})),n.d(r,"variants",(function(){return G})),n.d(r,"images",(function(){return Q})),n.d(r,"getVariantById",(function(){return Z})),n.d(r,"currentVariant",(function(){return tt}));var i={};n.r(i),n.d(i,"addToCart",(function(){return rt}));var o={};n.r(o),n.d(o,"mutateCounter",(function(){return it})),n.d(o,"setCurrentVariantId",(function(){return ot})),n.d(o,"setActiveImageIndex",(function(){return at})),n.d(o,"setVariants",(function(){return st})),n.d(o,"setImages",(function(){return ct}));n("8e6e"),n("456d"),n("7f7f");var a=n("bd86"),s=(n("ac4d"),n("8a81"),n("ac6a"),n("a481"),n("5df3"),n("1c4c"),n("cadf"),n("551c"),n("f751"),n("097d"),n("a026")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bagdetail"},[n("router-view")],1)},l=[],u=Object(a["a"])({name:"App",components:{},methods:{},computed:{},mounted:function(){this.$router.push({name:this.$parent.tagName})}},"methods",{go:function(t){console.log("#logGO",t),this.$router.push(t)}}),d=u,f=(n("5c0b"),n("2877")),p=Object(f["a"])(d,c,l,!1,null,null,null),m=p.exports,g=(n("472d"),n("8c4f")),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"imagelist-mobile",attrs:{tabindex:"0"}},[n("swiper",{ref:"mobileswiper",attrs:{options:t.mobileSwiperOption}},[t._l(t.variantImages,(function(t,e){return n("swiper-slide",{key:e},[n("div",{staticClass:"swiper-zoom-container"},[n("img",{attrs:{src:t.biglink}})])])})),n("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1),n("div",{staticClass:"imagelist-fullscreen",class:{"is-visible":t.fullscreen,"full-opacity":t.fullscreen},attrs:{tabindex:"0"}},[n("a",{staticClass:"close-button",attrs:{"aria-label":"Close"},on:{click:function(e){return e.preventDefault(),t.closeImageDetail()}}},[n("i",{staticClass:"fal fa-times fa-2x"})]),t.fullscreen?n("swiper",{ref:"swiper0",attrs:{options:t.swiperOption}},[t._l(t.variantImages,(function(t,e){return n("swiper-slide",{key:e},[n("div",{staticClass:"swiper-zoom-container"},[n("img",{attrs:{src:t.biglink}})])])})),n("div",{staticClass:"swiper-button-prev swiper-button-black",attrs:{slot:"button-prev"},slot:"button-prev"}),n("div",{staticClass:"swiper-button-next swiper-button-black",attrs:{slot:"button-next"},slot:"button-next"})],2):t._e()],1),n("div",{staticClass:"image-list"},t._l(t.variantImages,(function(e,r){return n("figure",{key:r,ref:"img_"+r,refInFor:!0,staticClass:"prod-image zoom",style:{backgroundImage:"url("+e.biglink+")"},attrs:{id:"img_"+r},on:{mousemove:t.zoom,click:function(e){return e.preventDefault(),t.openImageDetail(r)}}},[n("img",{attrs:{src:e.link}})])})),0)])},h=[],b=n("75fc"),w=(n("7514"),n("28a5"),n("dfa4"),n("7212")),y=n("b17e"),I=function(t,e){var n=t.split(e);return""==n[0]&&1==n.length?[]:n},x={name:"ImageList",data:function(){return{fullscreen:!1,fullscreenImgIdx:0,swiperOption:{speed:1e3,loop:!0,preventClicks:!1,slidesPerView:1,keyboard:{enabled:!0,onlyInViewport:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},mobileSwiperOption:{speed:1e3,loop:!0,preventClicks:!1,slidesPerView:1,pagination:{el:".swiper-pagination",type:"fraction"}}}},props:{childNodes:{type:Array}},components:{swiper:w["swiper"],swiperSlide:w["swiperSlide"]},methods:{openImageDetail:function(t){this.fullscreen=!0,this.fullscreenImgIdx=t},closeImageDetail:function(){this.fullscreen=!1},watchTnScroll:function(t){var e=this,n=document.documentElement.scrollTop,r=y.pipe(y.map((function(t){return e.$refs[t][0].offsetTop+e.$refs[t][0].offsetHeight/2<n?e.$refs[t][0]:null})),y.filter((function(t){return null!==t})))(this.variantImageElementRefs);this.$store.commit("setActiveImageIndex",r.length)},setupScrollWatch:function(){window.addEventListener("scroll",this.watchTnScroll)},getImgById:function(t){return this.images.find((function(e){return e.id==t}))},zoom:function(t){var e=t.currentTarget,n=0,r=0;n=t.offsetX?t.offsetX:t.touches[0].pageX,t.offsetY?r=t.offsetY:n=t.touches[0].pageX;var i=n/e.offsetWidth*100,o=r/e.offsetHeight*100;e.style.backgroundPosition=i+"% "+o+"%"},setupEscapeKey:function(t){document.addEventListener("keyup",(function(e){27===e.keyCode&&(console.log("#log 6877 ESC "),t())}))}},computed:{images:function(){return y.map((function(t){return{id:parseInt(t.dbid,10),link:t.src,biglink:t.bigsrc,smalllink:t.smallsrc,tagIds:y.map((function(t){return parseInt(t,10)}))(I(t.tags," "))}}))(this.childNodes)},currentVariant:function(){return this.$store.getters.currentVariant},variantImages:function(){var t=this;return this.currentVariant?y.map((function(e){return t.getImgById(e)}))(this.currentVariant.imgIds):this.images},variantImageElementRefs:function(){var t=y.addIndex(y.map);return t((function(t,e){return"img_"+e}),this.variantImages)}},watch:{variantImages:function(t){this.$store.commit("setImages",Object(b["a"])(t)),this.$refs.mobileswiper.swiper.slideTo(1)},fullscreen:function(t){t?(this.swiperOption.initialSlide=this.fullscreenImgIdx,document.body.classList.add("u-overflow-hidden")):document.body.classList.remove("u-overflow-hidden")}},created:function(){},mounted:function(){this.setupScrollWatch(),this.setupEscapeKey(this.closeImageDetail)}},k=x,C=(n("5cc2"),Object(f["a"])(k,v,h,!1,null,null,null)),O=C.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"thumbnail-list"},t._l(t.$store.getters.images,(function(e,r){return n("img",{key:r,ref:r,refInFor:!0,class:{active:r==t.$store.getters.activeImageIndex},attrs:{src:e.smalllink},on:{click:function(e){return t.scrollTo(r)}}})})),0)])},S=[],_=(n("b17e"),{name:"ThumbnailList",data:function(){return{}},props:{},components:{},methods:{scrollTo:function(t){var e=document.getElementById("img_"+t);e.scrollIntoView({behavior:"smooth",block:"center"})}},computed:{},created:function(){}}),j=_,E=(n("366c"),Object(f["a"])(j,V,S,!1,null,null,null)),$=E.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"variants",class:t.useDropdown?"use-dropdown":"no-dropdown"},[t.useDropdown?n("a",{staticClass:"opener active",attrs:{href:t.currentVariant.link},on:{click:function(e){return e.preventDefault(),t.toggleDropdown(e)}}},[n("span",{staticClass:"swatch"},[n("i",{staticClass:"swatch",style:{backgroundColor:t.currentVariant.color}})]),n("span",{staticClass:"text"},[t._v(t._s(t.currentVariant.name))]),n("span",{staticClass:"marker"},[t.dropdownOpen?n("i",{staticClass:"fal fa-chevron-up"}):n("i",{staticClass:"fal fa-chevron-down"})])]):t._e(),t.dropdownVisible?n("div",{staticClass:"listedVariants"},t._l(t.listedVariants,(function(e,r){return n("a",{key:r,class:[e.id==t.$store.getters.currentVariantId?"active":"not-active",e.inStock>0?"in-stock":"no-stock"],attrs:{href:e.link},on:{click:function(n){return n.preventDefault(),t.setCurrentVariantId(e.id)}}},[n("span",{staticClass:"swatch"},[n("i",{staticClass:"swatch",style:{backgroundColor:e.color}})]),n("span",{staticClass:"text"},[t._v(t._s(e.name))]),t._m(0,!0)])})),0):t._e()]),n("div",[t._v("Â ")]),n("div",{staticClass:"addtocart"},[t.currentVariant.inStock>0?n("div",[n("button",{staticClass:"btn btn-outline-primary btn-intocart",on:{click:function(e){return t.addToCart(t.$store.getters.currentVariantId)}}},[t._v("Add to Cart")])]):n("div",[n("span",{staticClass:"btn btn-outline btn-intocart"},[t._v("Sold Out")])])])])},D=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"marker"},[n("i",{staticClass:"fal fa-check"})])}],L=n("b17e"),P=function(t,e){var n=t.split(e);return""==n[0]&&1==n.length?[]:n},M={name:"Variants",data:function(){return{dropdownOpen:!1}},props:{childNodes:{type:Array},currentVariantId:{type:String}},components:{},methods:{setCurrentVariantId:function(t){this.$store.commit("setCurrentVariantId",t),this.dropdownOpen=!1},toggleDropdown:function(){console.log("#log 5226",this.dropdownOpen),this.dropdownOpen=!this.dropdownOpen},addToCart:function(t){this.$store.dispatch("addToCart",t)}},computed:{dropdownVisible:function(t){return!this.useDropdown||this.dropdownOpen},useDropdown:function(){return!1},variants:function(){return L.map((function(t){return{name:t.name,link:t.href,id:parseInt(t.dbid,10),inStock:parseInt(t.instock,10),color:t.colorstr,imgIds:L.map((function(t){return parseInt(t,10)}))(P(t.imgs,","))}}))(this.childNodes)},listedVariants:function(){if(this.useDropdown){var t=this.$store.getters.currentVariantId;return L.filter((function(e){return e.id!==t}))(this.variants)}return this.variants},currentVariant:function(){return this.$store.getters.currentVariant}},created:function(){this.$store.commit("setCurrentVariantId",parseInt(this.currentVariantId,10)),this.$store.commit("setVariants",Object(b["a"])(this.variants))}},A=M,z=(n("8e63"),Object(f["a"])(A,T,D,!1,null,null,null)),q=z.exports,N=function(t){return new g["a"]({linkActiveClass:"is-active",mode:"abstract",routes:[{path:"/images",component:O,name:"bagdetail-imagelist",props:t},{path:"/variants",component:q,name:"bagdetail-variants",props:t},{path:"/thumbnails",component:$,name:"bagdetail-thumbnails",props:t}]})},H=N,W=n("2f62"),B=function(t){return t.debug},U=function(t){return t.extconf},X=function(t){return t.counter},F=function(t){return t.extconf.csrfToken},J=function(t){return t.extconf.liveApiUrl},K=function(t){return t.extconf.lang},R=function(t){return t.currentVariantId},Y=function(t){return t.activeImageIndex},G=function(t){return t.variants},Q=function(t){return t.images},Z=function(t,e){return function(t){return console.log("#log 2512",t),e.variants.find((function(e){return e.id===t}))}},tt=function(t,e){return e.getVariantById(e.currentVariantId)},et=n("bc3a"),nt=n.n(et),rt=function(t,e){t.commit;var n=t.getters;return new Promise((function(t,r){nt.a.get(n.liveApiUrl+"/cartapi/add_to_cart/"+e).then((function(e){window.updateCartCount(),window.location="/ex/".concat(n.lang,"/cart"),t()})).catch((function(t){r(t.response)}))}))},it=function(t,e){t.counter=t.counter+e},ot=function(t,e){t.currentVariantId=e},at=function(t,e){t.activeImageIndex=e},st=function(t,e){t.variants=e},ct=function(t,e){t.images=e},lt=n("9fdd"),ut={debug:!0,counter:0,currentVariantId:0,activeImageIndex:0,images:[],variants:[],extconf:window.vueAppConf};s["default"].use(W["a"]);var dt=new W["a"].Store({state:lt["a"](ut),getters:r,actions:i,mutations:o,strict:!0}),ft=dt;function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"camelize",(function(){return yt}));var gt=n("b17e");s["default"].config.productionTip=!1,s["default"].use(g["a"]);var vt=".vueapp-bagdetail",ht=Array.from(document.querySelectorAll(vt)),bt=[],wt=/-(\w)/g,yt=function(t){return t.replace(wt,(function(t,e){return e?e.toUpperCase():""}))},It=document.querySelector(".product-info"),xt=document.querySelector(".thumbnail-container"),kt=document.querySelector(".detail-right"),Ct=function(){console.log("#log 6566 setFixedColumnWidth",document.querySelector(".detail-right").offsetWidth);var t=document.querySelector(".detail-right").offsetWidth;It.style.width=t+"px";var e=document.querySelector(".detail-thumbnails").offsetWidth;xt.style.width=e+"px"},Ot=function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)},Vt=function(){var t=document.querySelector(".image-list").offsetHeight,e=(kt.offsetTop,It.offsetHeight),n=t-e;t>window.innerHeight&&n>0&&document.documentElement.scrollTop>0?It.classList.add("scroll-start"):Ot(It,".scroll-start")&&It.classList.remove("scroll-start"),n>0&&document.documentElement.scrollTop>=n?It.classList.add("scroll-end"):Ot(It,".scroll-end")&&It.classList.remove("scroll-end")},St=function(){var t=document.querySelector(".image-list").offsetHeight,e=(kt.offsetTop,xt.offsetHeight),n=t-e;t>window.innerHeight&&n>0&&document.documentElement.scrollTop>0?xt.classList.add("scroll-start"):Ot(xt,".scroll-start")&&xt.classList.remove("scroll-start"),n>0&&document.documentElement.scrollTop>=n?xt.classList.add("scroll-end"):Ot(xt,".scroll-end")&&xt.classList.remove("scroll-end")};if(Ct(),document.addEventListener("DOMContentLoaded",Ct),window.addEventListener("resize",Ct),window.addEventListener("scroll",Vt),window.addEventListener("scroll",St),ht.length>0){var _t=!0,jt=!1,Et=void 0;try{for(var $t,Tt=ht[Symbol.iterator]();!(_t=($t=Tt.next()).done);_t=!0){var Dt=$t.value,Lt=gt.reduce((function(t,e){return mt({},t,Object(a["a"])({},yt(e.name),e.value))}),{})(Dt.attributes),Pt=[],Mt=!0,At=!1,zt=void 0;try{for(var qt,Nt=Dt.children[Symbol.iterator]();!(Mt=(qt=Nt.next()).done);Mt=!0){var Ht=qt.value;Pt.push(gt.reduce((function(t,e){return mt({},t,Object(a["a"])({},e.name,e.value))}),{})(Ht.attributes))}}catch(Bt){At=!0,zt=Bt}finally{try{Mt||null==Nt.return||Nt.return()}finally{if(At)throw zt}}Lt.childNodes=Pt;var Wt=new s["default"]({render:function(t){return t(m)},el:Dt,data:{tagName:null,attributes:{}},beforeMount:function(){this.tagName=this.$el.tagName.toLowerCase()},router:H(Lt),store:ft});bt.push(Wt)}}catch(Bt){jt=!0,Et=Bt}finally{try{_t||null==Tt.return||Tt.return()}finally{if(jt)throw Et}}}},"5c0b":function(t,e,n){"use strict";var r=n("a859"),i=n.n(r);i.a},"5cc2":function(t,e,n){"use strict";var r=n("209e"),i=n.n(r);i.a},8144:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".bagdetail .ti-item,.bagdetail .ti-tag{color:#000!important}.bagdetail .ti-item.ti-selected-item,.bagdetail .ti-tag.ti-selected-item{border:1px solid #000}.bagdetail .ti-item{border:1px solid transparent}",""])},"8e63":function(t,e,n){"use strict";var r=n("c2eb"),i=n.n(r);i.a},a859:function(t,e,n){var r=n("8144");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("499e").default;i("469a83a7",r,!0,{sourceMap:!1,shadowMode:!1})},b328:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"",""])},b499:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".no-stock .text{opacity:.4}",""])},c2eb:function(t,e,n){var r=n("b499");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("499e").default;i("8e387632",r,!0,{sourceMap:!1,shadowMode:!1})},e6a4:function(t,e,n){var r=n("b328");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("499e").default;i("5a3026e1",r,!0,{sourceMap:!1,shadowMode:!1})},e8c0:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"figure.active{border:1px solid red!important}.imagelist-fullscreen{background-color:#fff;z-index:100;-webkit-transition:opacity 2s ease;transition:opacity 2s ease;display:none;opacity:0;position:fixed;right:0;bottom:0;top:0;left:0;overflow:auto}.imagelist-fullscreen.full-opacity{opacity:1}.imagelist-fullscreen.is-visible{display:block}.imagelist-fullscreen .swiper-button-next,.imagelist-fullscreen .swiper-button-prev{position:fixed;fill:#000;stroke:#000;zoom:.7}.imagelist-fullscreen .swiper-button-next{right:20px}.imagelist-fullscreen .swiper-zoom-container>img{max-height:100vh}.imagelist-fullscreen .close-button{top:25px;right:25px;position:fixed;z-index:1000}.u-overflow-hidden{overflow:hidden}",""])}});
//# sourceMappingURL=app.31aba76b.js.map